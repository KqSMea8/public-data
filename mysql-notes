实践规划：
1.每日sql语句执行情况
有哪些sql，只有参数不一样的归为一类，执行次数，平均执行时长，最高执行时长，
读写sql区分开统计
跨机房对性能延迟的影响分析？ 记录client-ip，分别统计？
业务高峰期？

高性能mysql 第3版
查询处理(query processing)、其他任务(server task) 和 数据的存储提取分离。
mysql服务器逻辑架构图 
不同存储引擎之间是否会通信?
存储引擎几十个底层函数？
并发控制？
线程池？
锁：共享shared锁-读锁，排他exclusive锁-写锁, 优先级？
锁操作：获得，检查，释放
row-level lock  table
事物acid，原子性Atomicity，一致性Consistency, 隔离性isolation，持久性durability.
间隙锁 next-key locking

隔离级别：
1. Read uncommitted 未提交读， 脏读 dirty read, 性能不会好太多，效果也很差，不常用 
2. Read committed 提交读 大部分其他db mvcc
3. Repeatable read 可重复读 mysql  mvcc 
4. Serializable 可串行化， 最高隔离级别，不常用

幻读phantom read ? 多版本并发控制，MVCC Multiversion Concurrency Control，行级锁的变种

死锁，多个事务以不同顺序锁定资源，多个事务锁定同一资源。死锁检测、超时
将持有最少行级别排它锁的事务回滚
事物日志，修改内存拷贝，持久化至硬盘的事物日志，追加方式，一小块区域的顺序io，更快，
预写式日志write-ahead logging 

mysql支持事务的innodb，ndb cluster,第三方xtradb,pbxt

autocommit默认每条sql都是事务
ddl，数据库定义语言
设置隔离级别？

隐式锁，显式锁
避免显式锁

乐观并发，悲观并发
mvcc，两个隐藏列，创建时间，过期时间，存储的是系统版本号，大部分读操作不用加锁


frm, schema定义

聚簇索引
插入缓冲区
热备份
myisam 崩溃后无法安全恢复

使用innodb的优点总结
分片？

基准测试
集成式full-stack，单组件式single-component

测试指标，
*响应时间或延迟latency，任务所需时间
*吞吐量troughput，单位时间内事物处理数 tpc.org tps秒 tpm分钟
*并发性，sysbench, threads_running
*可扩展性，
tpc-h

mysql的查询日志？
对日志中的每个连接创建独立的线程，how？

cpu，磁盘io，网络流量，show global status计数器

makefile？

gnuplot 绘图

show engine innodb status 
show full processlist 

基准测试工具
1.集成式 
* ab, apache http服务器基准测试工具，可以用到nginx上？
* http_load, 一个输入文件提供多个url
* jMeter, 可控制预热时间 
2.单组件式
* mysqlslap,
* Mysql Benchmark Suite sql-bench, 提供一些sample，cpu密集型的，缺点单线程，需要perl,dbd支持
* Super smack，复杂强大
* Database Test Suite  osdldbt
* Percona's TPCC-MySQL Tool
* sysbench







